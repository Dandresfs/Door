extends ../base
block title
    |CONTROL DE ACCESO
block head_content

block body_content

block body_script
    script.
       Notification.requestPermission();
       var ws_scheme = window.location.protocol == "https:" ? "wss" : "ws";
       socket = new ReconnectingWebSocket(ws_scheme + '://' + window.location.host + "/realtime/");

       socket.onmessage = function (e) {
          var data = JSON.parse(e.data);
          if(data.card_data != undefined){
             var noti = new Notification( data.card_data );
             setTimeout( function() { noti.close() }, 3000);
          }
       }

       socket.onopen = function () {
       }